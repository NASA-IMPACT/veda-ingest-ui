# Test info

- Name: COG Viewer Page >> COG Viewer loads multi band COG 
- Location: /home/runner/work/veda-ingest-ui/veda-ingest-ui/__tests__/playwright/COGViewerPage.test.tsx:45:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByLabel('Band (R)')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByLabel('Band (R)')

    at /home/runner/work/veda-ingest-ui/veda-ingest-ui/__tests__/playwright/COGViewerPage.test.tsx:51:47
```

# Page snapshot

```yaml
- complementary:
  - text: VEDA Ingest UI
  - menu:
    - menuitem "home Home":
      - img "home"
      - link "Home":
        - /url: /
    - menuitem "plus-circle Create Ingest":
      - img "plus-circle"
      - link "Create Ingest":
        - /url: /create-ingest
    - menuitem "global COG Viewer":
      - img "global"
      - link "COG Viewer":
        - /url: /cog-viewer
  - button "logout Sign out":
    - img "logout"
    - text: Sign out
  - img "left"
- main:
  - searchbox "Enter COG URL": s3://test.com
  - button "Load"
  - button "Zoom in"
  - button "Zoom out"
  - link "Leaflet":
    - /url: https://leafletjs.com
  - text: Â© OpenStreetMap contributors
- button "Open Next.js Dev Tools":
  - img
- alert
```

# Test source

```ts
   1 | import { expect, test } from '@/__tests__/playwright/setup-msw';
   2 | import { HttpResponse } from 'msw';
   3 |
   4 | test.describe('COG Viewer Page', () => {
   5 |   test('COG Viewer loads single band COG ', async ({
   6 |     page,
   7 |     http,
   8 |     worker,
   9 |   }, testInfo) => {
  10 |     await worker.use(
  11 |       http.get('/api/raster/cog/info', ({ request }) => {
  12 |         return HttpResponse.json({
  13 |           band_descriptions: [['b1', 'Band 1']],
  14 |         });
  15 |       })
  16 |     );
  17 |     //
  18 |     await test.step('Navigate to the page with COG Viewer Page', async () => {
  19 |       await page.goto('/cog-viewer');
  20 |     });
  21 |
  22 |     await test.step('Load COG ViewerPage with mock response from /raster/cog/info endpoint', async () => {
  23 |       await page.getByPlaceholder(/Enter COG URL/i).fill('s3://test.com');
  24 |       await page.getByRole('button', { name: /load/i }).click();
  25 |     });
  26 |     await test.step('Validate Band Name Header is visible for single band COG', async () => {
  27 |       await expect(page.getByText('Band: Band 1 (Index: 1)')).toBeVisible();
  28 |     });
  29 |
  30 |     await test.step('RGB Band Dropdowns are hidden for single band COG', async () => {
  31 |       await expect(page.getByLabel('Band (R)')).toBeHidden();
  32 |       await expect(page.getByLabel('Band (G)')).toBeHidden();
  33 |       await expect(page.getByLabel('Band (B)')).toBeHidden();
  34 |     });
  35 |     const singleBandCOGControlsScreenshot = await page.screenshot();
  36 |     testInfo.attach(
  37 |       'Default state of COG Viewer Form Controls for single band COG',
  38 |       {
  39 |         body: singleBandCOGControlsScreenshot,
  40 |         contentType: 'image/png',
  41 |       }
  42 |     );
  43 |   });
  44 |
  45 |   test('COG Viewer loads multi band COG ', async ({ page }) => {
  46 |     await page.goto('/cog-viewer');
  47 |
  48 |     await page.getByPlaceholder('Enter COG URL').fill('s3://test.com');
  49 |     await page.getByRole('button', { name: /Load/i }).click();
  50 |     await expect(page.getByText('Band: Band 1 (Index: 1)')).toBeHidden();
> 51 |     await expect(page.getByLabel('Band (R)')).toBeVisible();
     |                                               ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  52 |     await expect(page.locator('[data-testid="band-R"]')).toContainText(
  53 |       'b1 - Band 1'
  54 |     );
  55 |     await expect(page.getByLabel('Band (G)')).toBeVisible();
  56 |     await expect(page.locator('[data-testid="band-G"]')).toContainText(
  57 |       'b2 - Band 2'
  58 |     );
  59 |     await expect(page.getByLabel('Band (B)')).toBeVisible();
  60 |     await expect(page.locator('[data-testid="band-B"]')).toContainText(
  61 |       'b3 - Band 3'
  62 |     );
  63 |
  64 |     await expect(page.locator('[data-testid="colormap"]')).toContainText(
  65 |       'Internal'
  66 |     );
  67 |
  68 |     await expect(
  69 |       page.getByRole('button', { name: /update tile layer/i })
  70 |     ).toBeDisabled();
  71 |     await page.getByRole('button', { name: 'View Rendering Options' }).click();
  72 |     await expect(
  73 |       page.getByRole('dialog', { name: /COG Rendering Options/i })
  74 |     ).toBeVisible();
  75 |     await expect(
  76 |       page.getByText('COG Rendering Options{ "bidx').getByRole('textbox')
  77 |     ).toHaveText(
  78 |       JSON.stringify(
  79 |         {
  80 |           bidx: [1],
  81 |           rescale: [],
  82 |           assets: ['cog_default'],
  83 |         },
  84 |         null,
  85 |         2
  86 |       )
  87 |     );
  88 |   });
  89 | });
  90 |
```