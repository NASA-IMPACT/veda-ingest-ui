# Test info

- Name: COGControlsForm Layout 🎨 >> only render the band name, not the individual test band dropdowns for single band COG
- Location: /home/runner/work/veda-ingest-ui/veda-ingest-ui/__tests__/playwright/COGControlsForm.test.tsx:6:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByText('OpenStreetMap contributors')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByText('OpenStreetMap contributors')

    at /home/runner/work/veda-ingest-ui/veda-ingest-ui/__tests__/playwright/COGControlsForm.test.tsx:24:66
    at /home/runner/work/veda-ingest-ui/veda-ingest-ui/__tests__/playwright/COGControlsForm.test.tsx:23:16
```

# Page snapshot

```yaml
- complementary:
  - text: VEDA Ingest UI
  - menu:
    - menuitem "home Home":
      - img "home"
      - link "Home":
        - /url: /
    - menuitem "plus-circle Create Ingest":
      - img "plus-circle"
      - link "Create Ingest":
        - /url: /create-ingest
    - menuitem "global COG Viewer":
      - img "global"
      - link "COG Viewer":
        - /url: /cog-viewer
  - button "logout Sign out":
    - img "logout"
    - text: Sign out
  - img "left"
- main:
  - searchbox "Enter COG URL"
  - button "Load"
  - button "Zoom in"
  - button "Zoom out"
  - link "Leaflet":
    - /url: https://leafletjs.com
  - text: © OpenStreetMap contributors
- button "Open Next.js Dev Tools":
  - img
- alert
```

# Test source

```ts
   1 | import { expect, test } from '@/__tests__/playwright/setup-msw';
   2 | import { HttpResponse } from 'msw';
   3 |
   4 | const testBands = ['R', 'G', 'B'];
   5 | test.describe('COGControlsForm Layout 🎨', () => {
   6 |   test('only render the band name, not the individual test band dropdowns for single band COG', async ({
   7 |     page,
   8 |     http,
   9 |     worker,
   10 |   }, testInfo) => {
   11 |     await worker.use(
   12 |       http.get('/api/raster/cog/info', ({ request }) => {
   13 |         return HttpResponse.json({
   14 |           band_descriptions: [['b1', 'Band 1']],
   15 |         });
   16 |       })
   17 |     );
   18 |     // Navigate to the page with COGControlsForm
   19 |     await test.step('navigate to Cog Viewer Page', async () => {
   20 |       await page.goto('/cog-viewer');
   21 |     });
   22 |
   23 |     await test.step('Load COG ViewerPage with mock response from /raster/cog/info endpoint', async () => {
>  24 |       await expect(page.getByText('OpenStreetMap contributors')).toBeVisible();
      |                                                                  ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
   25 |       await page.getByPlaceholder(/Enter COG URL/i).fill('s3://test.com');
   26 |       await page.getByRole('button', { name: /load/i }).click();
   27 |     });
   28 |
   29 |     await expect(
   30 |       page.getByRole('button', { name: /update tile layer/i }),
   31 |       'update tile layer button should be disabled by default'
   32 |     ).toBeDisabled();
   33 |
   34 |     await test.step('heading with band name should be displayed', async () => {
   35 |       await expect(
   36 |         page.getByRole('heading', { name: 'Band: Band 1 (Index: 1)' })
   37 |       ).toBeVisible();
   38 |     });
   39 |
   40 |     await test.step('Verify RGB Band Dropdowns are hidden for single band COG', async () => {
   41 |       const bandRDropdown = page.locator(
   42 |         `[data-testid="band-R"] .ant-select-selector`
   43 |       );
   44 |       const bandGDropdown = page.locator(
   45 |         `[data-testid="band-G"] .ant-select-selector`
   46 |       );
   47 |       const bandBDropdown = page.locator(
   48 |         `[data-testid="band-B"] .ant-select-selector`
   49 |       );
   50 |       await expect(bandRDropdown).toBeHidden();
   51 |       await expect(bandGDropdown).toBeHidden();
   52 |       await expect(bandBDropdown).toBeHidden();
   53 |     });
   54 |
   55 |     const singleBandCOGControlsScreenshot = await page.screenshot();
   56 |     testInfo.attach(
   57 |       'Default state of COG Viewer Form Controls for single band COG',
   58 |       {
   59 |         body: singleBandCOGControlsScreenshot,
   60 |         contentType: 'image/png',
   61 |       }
   62 |     );
   63 |   });
   64 |
   65 |   test('render RGB band dropdowns for single band COG', async ({
   66 |     page,
   67 |   }, testInfo) => {
   68 |     await test.step('navigate to Cog Viewer Page', async () => {
   69 |       await page.goto('/cog-viewer');
   70 |     });
   71 |
   72 |     await test.step('Load COG ViewerPage with mock response from /raster/cog/info endpoint', async () => {
   73 |       await expect(page.getByText('OpenStreetMap contributors')).toBeVisible();
   74 |       await page.getByPlaceholder(/Enter COG URL/i).fill('s3://test.com');
   75 |       await page.getByRole('button', { name: /load/i }).click();
   76 |     });
   77 |
   78 |     await test.step('verify RGB dropdowns are visible for multiband COG mock', async () => {
   79 |       await expect(page.locator('[data-testid="band-R"]')).toBeVisible();
   80 |       await expect(page.locator('[data-testid="band-R"]')).toContainText(
   81 |         'b1 - Band 1'
   82 |       );
   83 |
   84 |       // Verify the initial state
   85 |       await expect(page.locator('[data-testid="band-G"]')).toBeVisible();
   86 |       await expect(page.locator('[data-testid="band-G"]')).toContainText(
   87 |         'b2 - Band 2'
   88 |       );
   89 |
   90 |       // Verify the initial state
   91 |       await expect(page.locator('[data-testid="band-B"]')).toBeVisible();
   92 |       await expect(page.locator('[data-testid="band-B"]')).toContainText(
   93 |         'b3 - Band 3'
   94 |       );
   95 |     });
   96 |
   97 |     const multiBandCOGControlsScreenshot = await page.screenshot();
   98 |     testInfo.attach(
   99 |       'Default state of COG Viewer Form Controls for multi-band COG',
  100 |       {
  101 |         body: multiBandCOGControlsScreenshot,
  102 |         contentType: 'image/png',
  103 |       }
  104 |     );
  105 |   });
  106 | });
  107 |
  108 | test.describe('COGControlsForm inputs update tile parameters ⚙️', () => {
  109 |   for (const band of testBands) {
  110 |     test(`band (${band}) selection enables update tile layer and updates parameters`, async ({
  111 |       page,
  112 |     }) => {
  113 |       await test.step('navigate to Cog Viewer Page', async () => {
  114 |         await page.goto('/cog-viewer');
  115 |       });
  116 |
  117 |       await test.step('Load COG ViewerPage with mock response from /raster/cog/info endpoint', async () => {
  118 |         await expect(
  119 |           page.getByText('OpenStreetMap contributors')
  120 |         ).toBeVisible();
  121 |         await page.getByPlaceholder(/Enter COG URL/i).fill('s3://test.com');
  122 |         await page.getByRole('button', { name: /load/i }).click();
  123 |       });
  124 |
```